# frontend/nginx.conf

server {
    listen 80; # Nginx escuchará en el puerto 80 DENTRO del contenedor

    # Directorio donde estarán los archivos estáticos compilados
    # Corresponde al destino de `COPY --from=builder /app/dist /usr/share/nginx/html` en el Dockerfile
    root /usr/share/nginx/html;

    # Archivo principal a buscar cuando se solicita un directorio
    index index.html;

    # Regla clave para SPA:
    # Intenta servir el archivo exacto solicitado ($uri)
    # Si es un directorio, intenta servir el index dentro de él ($uri/)
    # Si ninguna de las anteriores funciona (ej. ruta como /login),
    # entonces sirve el archivo /index.html principal. El router de React/Vue se encargará.
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Opcional: Configuración de compresión Gzip (recomendado para producción)
    # Descomenta estas líneas si quieres habilitarlo
    # gzip on;
    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;
}